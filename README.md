# Reform API standards

[![Build Status](https://travis-ci.org/hmcts/reform-api-standards.svg?branch=master)](https://travis-ci.org/hmcts/reform-api-standards)

## SensitiveHeadersRequestTraceFilter
Removes sensitive headers before they are added to Spring trace.  
In order to use this filter declare the following Bean in your app:

```java
@Bean
public RequestTraceFilter requestTraceFilter(TraceRepository traceRepository, TraceProperties traceProperties) {
    return new RequestTraceFilter(traceRepository, traceProperties, <your_custom_headers_go_here>);
}
```

## @APIDeprecated
Added an annotation named `@APIDeprecated` for classes and methods that add warning headers to the responses generated by the API.

A typical usage would be to add the @APIDeprecated annotation to a method as in the following example.

```
    @RequestMapping("/deprecated")
    @APIDeprecated(
            name = "Deprecated Endpoint",
            expiryDate = "01/06/2018",
            docLink = "https://example.org/docs/api/deprecated/",
            note = "Just a note, upgrade your client code!!!"
    )
    public String deprecated() {
        return "Greetings from deprecated Class Controller!";
    }
```
The annotation has the attributes that are used for forming a `Warning` header. 
- `name` for friendly name of the endpoint, 
- `expiryDate` for the date which the endpoint will cease to serve, 
- `docLink` for the details of documentation regarding the API updates
- `note` for optional notes to the clients

A sample of the Warning header is as follows:
```
warning â†’The UserProfileEndpoint is deprecated and will be removed by 20/09/2017. Please see https://example.org/docs/api/deprecated/ for details. Just note that
``` 

It is possible to add the `@APIDeprecated` annotation on top of a `@Controller` class to deprecate all the endpoints served by that `@Controller` at once.
``` 
@RestController
@APIDeprecated(
        name = "Deprecated API set",
        expiryDate = "30/09/2018",
        docLink = "https://example.org/docs/api/deprecated/",
        note = "Just a note, upgrade your client code!!!"
)
public class DeprecatedClassController {

    @RequestMapping("/depclass")
    public String deprecated() {
        return "Greetings from deprecated Class Controller!";
    }

}
``` 